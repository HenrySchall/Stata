
#############	
### Logit ###
#############

logit ins age hisp educyear married retire hhincome hstatusg, robust

Iteration 0:  Log pseudolikelihood = -2139.7712  
Iteration 1:  Log pseudolikelihood = -1996.7434  
Iteration 2:  Log pseudolikelihood = -1994.8864  
Iteration 3:  Log pseudolikelihood = -1994.8784  
Iteration 4:  Log pseudolikelihood = -1994.8784  

Logistic regression                                     Number of obs =  3,206
                                                        Wald chi2(7)  = 256.49
                                                        Prob > chi2   = 0.0000
Log pseudolikelihood = -1994.8784                       Pseudo R2     = 0.0677

------------------------------------------------------------------------------
             |               Robust
         ins | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
         age |  -.0145955   .0110189    -1.32   0.185    -.0361921     .007001
        hisp |  -.8103059   .1936793    -4.18   0.000     -1.18991   -.4307016
    educyear |   .1142626   .0143616     7.96   0.000     .0861143    .1424108
     married |    .578636   .0941579     6.15   0.000       .39409    .7631821
      retire |   .1969297   .0849524     2.32   0.020     .0304261    .3634332
    hhincome |   .0023036   .0011485     2.01   0.045     .0000526    .0045546
    hstatusg |   .3122654   .0918378     3.40   0.001     .1322667    .4922641
       _cons |  -1.715578   .7279873    -2.36   0.018    -3.142407   -.2887495
------------------------------------------------------------------------------

estat class

Logistic model for ins

              -------- True --------
Classified |         D            ~D  |      Total
-----------+--------------------------+-----------
     +     |       345           308  |        653
     -     |       896          1657  |       2553
-----------+--------------------------+-----------
   Total   |      1241          1965  |       3206

Classified + if predicted Pr(D) >= .5
True D defined as ins != 0
--------------------------------------------------
Sensitivity                     Pr( +| D)   27.80%
Specificity                     Pr( -|~D)   84.33%
Positive predictive value       Pr( D| +)   52.83%
Negative predictive value       Pr(~D| -)   64.90%
--------------------------------------------------
False + rate for true ~D        Pr( +|~D)   15.67%
False - rate for true D         Pr( -| D)   72.20%
False + rate for classified +   Pr(~D| +)   47.17%
False - rate for classified -   Pr( D| -)   35.10%
--------------------------------------------------
Correctly classified                        62.45%
--------------------------------------------------

pwcorr ins age hisp educyear married retire hhincome hstatusg, star(.1)

             |      ins      age     hisp educyear  married   retire hhincome
-------------+---------------------------------------------------------------
         ins |   1.0000 
         age |   0.0312*  1.0000 
        hisp |  -0.1361* -0.0006   1.0000 
    educyear |   0.2306*  0.0399* -0.3281*  1.0000 
     married |   0.1467*  0.1576* -0.0266   0.0749*  1.0000 
      retire |   0.0802*  0.3116* -0.0659*  0.1351*  0.1220*  1.0000 
    hhincome |   0.1488*  0.0652* -0.1053*  0.2904*  0.2085* -0.0120   1.0000 
    hstatusg |   0.1398*  0.1967* -0.1163*  0.3098*  0.0961*  0.1280*  0.1551*

ssc install heatplot
ssc install colrspace, replace	
ssc install palettes, replace

matrix C = r(C)
heatplot C
	
regress ins age hisp educyear married retire hhincome hstatusg

      Source |       SS           df       MS      Number of obs   =     3,206
-------------+----------------------------------   F(7, 3198)      =     41.14
       Model |  62.8403396         7  8.97719137   Prob > F        =    0.0000
    Residual |   697.78505     3,198    .2181942   R-squared       =    0.0826
-------------+----------------------------------   Adj R-squared   =    0.0806
       Total |   760.62539     3,205  .237324615   Root MSE        =    .46711

------------------------------------------------------------------------------
         ins | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
         age |  -.0028955   .0024189    -1.20   0.231    -.0076383    .0018473
        hisp |  -.1210059    .033666    -3.59   0.000     -.187015   -.0549969
    educyear |   .0233686   .0028672     8.15   0.000      .017747    .0289903
     married |   .1234699   .0193618     6.38   0.000     .0855071    .1614326
      retire |   .0408508   .0182197     2.24   0.025     .0051273    .0765743
    hhincome |   .0004921   .0001375     3.58   0.000     .0002225    .0007617
    hstatusg |   .0655583   .0194531     3.37   0.001     .0274166    .1037001
       _cons |   .1270857   .1605628     0.79   0.429    -.1877308    .4419021
------------------------------------------------------------------------------

vif

    Variable |       VIF       1/VIF  
-------------+----------------------
    educyear |      1.32    0.758347
         age |      1.16    0.861129
    hstatusg |      1.16    0.864101
    hhincome |      1.15    0.869805
      retire |      1.14    0.874534
        hisp |      1.12    0.890992
     married |      1.08    0.927630
-------------+----------------------
    Mean VIF |      1.16

logit ins age hisp educyear married retire hhincome hstatusg, robust

Iteration 0:  Log pseudolikelihood = -2139.7712  
Iteration 1:  Log pseudolikelihood = -1996.7434  
Iteration 2:  Log pseudolikelihood = -1994.8864  
Iteration 3:  Log pseudolikelihood = -1994.8784  
Iteration 4:  Log pseudolikelihood = -1994.8784  

Logistic regression                                     Number of obs =  3,206
                                                        Wald chi2(7)  = 256.49
                                                        Prob > chi2   = 0.0000
Log pseudolikelihood = -1994.8784                       Pseudo R2     = 0.0677

------------------------------------------------------------------------------
             |               Robust
         ins | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
         age |  -.0145955   .0110189    -1.32   0.185    -.0361921     .007001
        hisp |  -.8103059   .1936793    -4.18   0.000     -1.18991   -.4307016
    educyear |   .1142626   .0143616     7.96   0.000     .0861143    .1424108
     married |    .578636   .0941579     6.15   0.000       .39409    .7631821
      retire |   .1969297   .0849524     2.32   0.020     .0304261    .3634332
    hhincome |   .0023036   .0011485     2.01   0.045     .0000526    .0045546
    hstatusg |   .3122654   .0918378     3.40   0.001     .1322667    .4922641
       _cons |  -1.715578   .7279873    -2.36   0.018    -3.142407   -.2887495
------------------------------------------------------------------------------

mfx

Marginal effects after logit
      y  = Pr(ins) (predict)
         =  .37283542
------------------------------------------------------------------------------
variable |      dy/dx    Std. err.     z    P>|z|  [    95% C.I.   ]      X
---------+--------------------------------------------------------------------
     age |  -.0034129      .00258   -1.32   0.185  -.008463  .001637   66.9139
    hisp*|  -.1677028      .03382   -4.96   0.000   -.23398 -.101426   .072676
educyear |   .0267179      .00334    7.99   0.000   .020164  .033272   11.8986
 married*|   .1295601      .01994    6.50   0.000   .090487  .168633   .733001
  retire*|   .0457255      .01958    2.34   0.020   .007357  .084094   .624766
hhincome |   .0005386      .00027    2.00   0.045   .000011  .001066   45.2639
hstatusg*|   .0716613      .02062    3.48   0.001   .031248  .112074   .704616
------------------------------------------------------------------------------
(*) dy/dx is for discrete change of dummy variable from 0 to 1

logistic ins age hisp educyear married retire hhincome hstatusg, robust

Logistic regression                                     Number of obs =  3,206
                                                        Wald chi2(7)  = 256.49
                                                        Prob > chi2   = 0.0000
Log pseudolikelihood = -1994.8784                       Pseudo R2     = 0.0677

------------------------------------------------------------------------------
             |               Robust
         ins | Odds ratio   std. err.      z    P>|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
         age |   .9855105   .0108592    -1.32   0.185      .964455    1.007026
        hisp |    .444722   .0861334    -4.18   0.000     .3042485    .6500529
    educyear |   1.121046      .0161     7.96   0.000     1.089931     1.15305
     married |   1.783604   .1679404     6.15   0.000     1.483034    2.145091
      retire |   1.217658    .103443     2.32   0.020     1.030894    1.438259
    hhincome |   1.002306   .0011511     2.01   0.045     1.000053    1.004565
    hstatusg |   1.366517   .1254979     3.40   0.001     1.141413    1.636016
       _cons |   .1798597   .1309355    -2.36   0.018     .0431787    .7491999
------------------------------------------------------------------------------
Note: _cons estimates baseline odds.

sum

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         age |      3,206    66.91391    3.675794         52         86
        hisp |      3,206    .0726762    .2596448          0          1
    educyear |      3,206    11.89863    3.304611          0         17
     married |      3,206    .7330006     .442461          0          1
      retire |      3,206    .6247661    .4842588          0          1
-------------+---------------------------------------------------------
    hhincome |      3,206    45.26391    64.33936          0   1312.124
         ins |      3,206    .3870867    .4871597          0          1
    hstatusg |      3,206    .7046163    .4562862          0          1


sort married
by married: sum ins

----------------------------------------------------------------------------------------------
-> married = 0

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         ins |        856    .2686916    .4435383          0          1

----------------------------------------------------------------------------------------------
-> married = 1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         ins |      2,350    .4302128    .4952112          0          1
	
	
sort educyear 
by educyear : sum ins

----------------------------------------------------------------------------------------------
-> educyear = 0

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         ins |         16           0           0          0          0

----------------------------------------------------------------------------------------------
-> educyear = 1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         ins |         10           0           0          0          0

----------------------------------------------------------------------------------------------
-> educyear = 2

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         ins |         18    .1111111    .3233808          0          1

----------------------------------------------------------------------------------------------
-> educyear = 3

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         ins |         41     .097561    .3004062          0          1

----------------------------------------------------------------------------------------------
-> educyear = 4

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         ins |         23    .0869565    .2881041          0          1

----------------------------------------------------------------------------------------------
-> educyear = 5

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         ins |         37    .2432432    .4349588          0          1

----------------------------------------------------------------------------------------------
-> educyear = 6

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         ins |         68    .1176471    .3245852          0          1

----------------------------------------------------------------------------------------------
-> educyear = 7

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         ins |         68    .1764706    .3840544          0          1

----------------------------------------------------------------------------------------------
-> educyear = 8

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         ins |        182    .2307692    .4224873          0          1

----------------------------------------------------------------------------------------------
-> educyear = 9

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         ins |        149    .2818792    .4514322          0          1

----------------------------------------------------------------------------------------------
-> educyear = 10

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         ins |        223      .32287    .4686254          0          1

----------------------------------------------------------------------------------------------
-> educyear = 11

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         ins |        169    .3136095    .4653384          0          1

----------------------------------------------------------------------------------------------
-> educyear = 12

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         ins |      1,109     .418395    .4935182          0          1

----------------------------------------------------------------------------------------------
-> educyear = 13

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         ins |        188    .4361702    .4972332          0          1

----------------------------------------------------------------------------------------------
-> educyear = 14

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         ins |        253    .4189723    .4943688          0          1

----------------------------------------------------------------------------------------------
-> educyear = 15

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         ins |         87    .4137931    .4953675          0          1

----------------------------------------------------------------------------------------------
-> educyear = 16

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         ins |        273    .5091575    .5008343          0          1

----------------------------------------------------------------------------------------------
-> educyear = 17

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         ins |        292    .5753425    .4951395          0          1

Marginal effects after logit
      y  = Pr(ins) (predict)
         =  .30766816
------------------------------------------------------------------------------
variable |      dy/dx    Std. err.     z    P>|z|  [    95% C.I.   ]      X
---------+--------------------------------------------------------------------
     age |   -.003109      .00235   -1.32   0.187  -.007724  .001506   66.9139
    hisp*|  -.1470582      .02963   -4.96   0.000  -.205123 -.088993   .072676
educyear |   .0243389      .00255    9.54   0.000   .019337  .029341         8
 married*|   .1082093      .01644    6.58   0.000   .075994  .140424         1
  retire*|   .0415299      .01786    2.33   0.020   .006523  .076537   .624766
hhincome |   .0004907      .00025    1.98   0.048   4.5e-06  .000977   45.2639
hstatusg*|   .0647795      .01882    3.44   0.001   .027885  .101674   .704616
------------------------------------------------------------------------------
(*) dy/dx is for discrete change of dummy variable from 0 to 1

*Probabilidade de cada pessoa ter um plano de saúde complementar
predict prob, p
list prob

reg ins age hisp educyear married retire hhincome hstatusg, robust

Linear regression                               Number of obs     =      3,206
                                                F(7, 3198)        =      58.98
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0826
                                                Root MSE          =     .46711

------------------------------------------------------------------------------
             |               Robust
         ins | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
         age |  -.0028955   .0023254    -1.25   0.213    -.0074549    .0016638
        hisp |  -.1210059   .0269459    -4.49   0.000    -.1738389    -.068173
    educyear |   .0233686   .0027081     8.63   0.000     .0180589    .0286784
     married |   .1234699   .0186521     6.62   0.000     .0868987    .1600411
      retire |   .0408508   .0182217     2.24   0.025     .0051234    .0765782
    hhincome |   .0004921   .0001874     2.63   0.009     .0001247    .0008595
    hstatusg |   .0655583   .0190126     3.45   0.001     .0282801    .1028365
       _cons |   .1270857   .1538816     0.83   0.409    -.1746309    .4288023
------------------------------------------------------------------------------

estimates store mpl

logit ins age hisp educyear married retire hhincome hstatusg, robust

Iteration 0:  Log pseudolikelihood = -2139.7712  
Iteration 1:  Log pseudolikelihood = -1996.7434  
Iteration 2:  Log pseudolikelihood = -1994.8864  
Iteration 3:  Log pseudolikelihood = -1994.8784  
Iteration 4:  Log pseudolikelihood = -1994.8784  

Logistic regression                                     Number of obs =  3,206
                                                        Wald chi2(7)  = 256.49
                                                        Prob > chi2   = 0.0000
Log pseudolikelihood = -1994.8784                       Pseudo R2     = 0.0677

------------------------------------------------------------------------------
             |               Robust
         ins | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
         age |  -.0145955   .0110189    -1.32   0.185    -.0361921     .007001
        hisp |  -.8103059   .1936793    -4.18   0.000     -1.18991   -.4307016
    educyear |   .1142626   .0143616     7.96   0.000     .0861143    .1424108
     married |    .578636   .0941579     6.15   0.000       .39409    .7631821
      retire |   .1969297   .0849524     2.32   0.020     .0304261    .3634332
    hhincome |   .0023036   .0011485     2.01   0.045     .0000526    .0045546
    hstatusg |   .3122654   .0918378     3.40   0.001     .1322667    .4922641
       _cons |  -1.715578   .7279873    -2.36   0.018    -3.142407   -.2887495
------------------------------------------------------------------------------

estimates store logit

estimates table mpl logit, b p

----------------------------------------
    Variable |    mpl         logit     
-------------+--------------------------
_            |
         age | -.00289555               
             |     0.2132               
        hisp | -.12100593               
             |     0.0000               
    educyear |  .02336863               
             |     0.0000               
     married |  .12346988               
             |     0.0000               
      retire |  .04085082               
             |     0.0250               
    hhincome |  .00049209               
             |     0.0087               
    hstatusg |  .06555834               
             |     0.0006               
       _cons |   .1270857               
             |     0.4089               
-------------+--------------------------
ins          |
         age |              -.01459553  
             |                  0.1853  
        hisp |              -.81030593  
             |                  0.0000  
    educyear |               .11426256  
             |                  0.0000  
     married |               .57863605  
             |                  0.0000  
      retire |               .19692966  
             |                  0.0204  
    hhincome |                .0023036  
             |                  0.0449  
    hstatusg |               .31226537  
             |                  0.0007  
       _cons |              -1.7155784  
             |                  0.0184  
----------------------------------------
                             Legend: b/p

##############							 
### Probit ###
##############

Mus14

reg ins age hisp educyear married retire hhincome hstatusg, robust

Linear regression                               Number of obs     =      3,206
                                                F(7, 3198)        =      58.98
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0826
                                                Root MSE          =     .46711

------------------------------------------------------------------------------
             |               Robust
         ins | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
         age |  -.0028955   .0023254    -1.25   0.213    -.0074549    .0016638
        hisp |  -.1210059   .0269459    -4.49   0.000    -.1738389    -.068173
    educyear |   .0233686   .0027081     8.63   0.000     .0180589    .0286784
     married |   .1234699   .0186521     6.62   0.000     .0868987    .1600411
      retire |   .0408508   .0182217     2.24   0.025     .0051234    .0765782
    hhincome |   .0004921   .0001874     2.63   0.009     .0001247    .0008595
    hstatusg |   .0655583   .0190126     3.45   0.001     .0282801    .1028365
       _cons |   .1270857   .1538816     0.83   0.409    -.1746309    .4288023
------------------------------------------------------------------------------

estimates store mpl

logit ins age hisp educyear married retire hhincome hstatusg, robust

Iteration 0:  Log pseudolikelihood = -2139.7712  
Iteration 1:  Log pseudolikelihood = -1996.7434  
Iteration 2:  Log pseudolikelihood = -1994.8864  
Iteration 3:  Log pseudolikelihood = -1994.8784  
Iteration 4:  Log pseudolikelihood = -1994.8784  

Logistic regression                                     Number of obs =  3,206
                                                        Wald chi2(7)  = 256.49
                                                        Prob > chi2   = 0.0000
Log pseudolikelihood = -1994.8784                       Pseudo R2     = 0.0677

------------------------------------------------------------------------------
             |               Robust
         ins | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
         age |  -.0145955   .0110189    -1.32   0.185    -.0361921     .007001
        hisp |  -.8103059   .1936793    -4.18   0.000     -1.18991   -.4307016
    educyear |   .1142626   .0143616     7.96   0.000     .0861143    .1424108
     married |    .578636   .0941579     6.15   0.000       .39409    .7631821
      retire |   .1969297   .0849524     2.32   0.020     .0304261    .3634332
    hhincome |   .0023036   .0011485     2.01   0.045     .0000526    .0045546
    hstatusg |   .3122654   .0918378     3.40   0.001     .1322667    .4922641
       _cons |  -1.715578   .7279873    -2.36   0.018    -3.142407   -.2887495
------------------------------------------------------------------------------

estimates store logit

estimates table mpl logit, b p

----------------------------------------
    Variable |    mpl         logit     
-------------+--------------------------
_            |
         age | -.00289555               
             |     0.2132               
        hisp | -.12100593               
             |     0.0000               
    educyear |  .02336863               
             |     0.0000               
     married |  .12346988               
             |     0.0000               
      retire |  .04085082               
             |     0.0250               
    hhincome |  .00049209               
             |     0.0087               
    hstatusg |  .06555834               
             |     0.0006               
       _cons |   .1270857               
             |     0.4089               
-------------+--------------------------
ins          |
         age |              -.01459553  
             |                  0.1853  
        hisp |              -.81030593  
             |                  0.0000  
    educyear |               .11426256  
             |                  0.0000  
     married |               .57863605  
             |                  0.0000  
      retire |               .19692966  
             |                  0.0204  
    hhincome |                .0023036  
             |                  0.0449  
    hstatusg |               .31226537  
             |                  0.0007  
       _cons |              -1.7155784  
             |                  0.0184  
----------------------------------------
                             Legend: b/p

                             							 
                             